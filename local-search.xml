<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Spring的@Transactional踩坑紀錄</title>
    <link href="/2023/01/18/Spring%E7%9A%84@Transactional%E8%B8%A9%E5%9D%91%E7%B4%80%E9%8C%84/"/>
    <url>/2023/01/18/Spring%E7%9A%84@Transactional%E8%B8%A9%E5%9D%91%E7%B4%80%E9%8C%84/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近同事遇到一個問題，就是當兩個service都掛交易時，spring的AOP拋出一個異常訊息，如下:<br>org.springframework.transaction.UnexpectedRollbackException:<br>Transaction rolled back because it has been marked as rollback-only</p><p>😜😜😜 <strong>那為何會這樣呢? 來分析一下原因</strong></p><hr><h2 id="1-發生原因"><a href="#1-發生原因" class="headerlink" title="1. 發生原因"></a>1. 發生原因</h2><h3 id="Transaction-rolled-back-because-it-has-been-marked-as-rollback-only"><a href="#Transaction-rolled-back-because-it-has-been-marked-as-rollback-only" class="headerlink" title="Transaction rolled back because it has been marked as rollback-only"></a>Transaction rolled back because it has been marked as rollback-only</h3><p>意思是交易已被標記為rollback (所以你不應該commit)</p><h3 id="這情況就是"><a href="#這情況就是" class="headerlink" title="這情況就是:"></a>這情況就是:</h3><p>當A和B都有交易，A呼叫B，B中發生例外狀況，<br>A在這邊捕捉B的例外狀況，但是A把這例外catch住，並沒有將例外狀況拋出，<br>導致A方法執行結束時，對A來說沒有問題，提交commit，<br>但因為交易已被標註rollback，出現衝突才會有了上述的錯誤。</p><h3 id="分享實際測試的簡易程式"><a href="#分享實際測試的簡易程式" class="headerlink" title="分享實際測試的簡易程式"></a>分享實際測試的簡易程式</h3><p>先用Spring Starter Project起一個專案，引入Spring Web</p><p>Aservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Aservice</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br>Bservice Bservice;<br><br><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span>  &#123;<br>System.out.println(<span class="hljs-string">&quot;insert in A&quot;</span>);<br><br><span class="hljs-keyword">try</span> &#123;<br>Bservice.insertData();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>System.out.println(<span class="hljs-string">&quot;ERRRRRRRRRRRRRRRRRRRRRRRR&quot;</span>);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;insert success in A&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Bservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Bservice</span> &#123;<br><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>System.out.println(<span class="hljs-string">&quot;insert in B and throw&quot;</span>);<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>testController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">testController</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br>Aservice aservice;<br><br><span class="hljs-meta">@GetMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>aservice.insertData();<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>當run起spring boot程式後 打<a href="http://localhost:9877/">http://localhost:9877/</a></p><p>得到的訊息</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs text">insert in A<br>insert in B and throw<br>ERRRRRRRRRRRRRRRRRRRRRRRR<br>insert success in A<br>2023-01-18 14:25:09.805 ERROR 12436 --- [nio-9877-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only] with root cause<br><br>org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only<br>at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:870) ~[spring-tx-5.3.24.jar:5.3.24]<br>at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:707) ~[spring-tx-5.3.24.jar:5.3.24]<br>at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.24.jar:5.3.24]<br>at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.24.jar:5.3.24]<br>at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.24.jar:5.3.24]<br>at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.24.jar:5.3.24]<br>at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.24.jar:5.3.24]<br>at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.24.jar:5.3.24]<br>at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.24.jar:5.3.24]<br>at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.24.jar:5.3.24]<br>at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.24.jar:5.3.24]<br>at com.example.service.Aservice$$EnhancerBySpringCGLIB$$bfc87790.insertData(&lt;generated&gt;) ~[classes/:na]<br>at com.example.controller.testController.test(testController.java:18) ~[classes/:na]<br>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_201]<br>at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_201]<br>at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_201]<br>at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_201]<br>at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at javax.servlet.http.HttpServlet.service(HttpServlet.java:670) ~[tomcat-embed-core-9.0.70.jar:4.0.FR]<br>at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.24.jar:5.3.24]<br>at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.70.jar:4.0.FR]<br>at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.24.jar:5.3.24]<br>at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.70.jar:9.0.70]<br>at java.lang.Thread.run(Thread.java:748) [na:1.8.0_201]<br><br><br></code></pre></td></tr></table></figure><h3 id="備註-要可以用-Transactional-需要設定連線資訊"><a href="#備註-要可以用-Transactional-需要設定連線資訊" class="headerlink" title="備註 要可以用@Transactional 需要設定連線資訊:"></a>備註 要可以用@Transactional 需要設定連線資訊:</h3><p>pom.xml引入依賴</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--交易 要使用@Transactional --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 交易需要設定連線 For DataBase connection --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>application.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">9877</span><br><span class="hljs-comment"># *** 請自行置換</span><br><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/***?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">***</span><br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">***</span><br><span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure><p>還有SpringbootTestAopApplication.java,要去scan 你的專案</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication(scanBasePackages = &#123; &quot;com.example.service&quot;, &quot;com.example.controller&quot;,</span><br><span class="hljs-meta">&quot;com.example.aop&quot; &#125;)</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootTestAopApplication</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>SpringApplication.run(SpringbootTestAopApplication.class, args);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="所以-要怎麼解決這-UnexpectedRollbackException-問題呢"><a href="#所以-要怎麼解決這-UnexpectedRollbackException-問題呢" class="headerlink" title="所以 要怎麼解決這 UnexpectedRollbackException 問題呢?"></a>所以 要怎麼解決這 UnexpectedRollbackException 問題呢?</h3><h4 id="解法-1-修改Transactional的propagation屬性-可以做到A正常commit-但B做rollback"><a href="#解法-1-修改Transactional的propagation屬性-可以做到A正常commit-但B做rollback" class="headerlink" title="解法 1: 修改Transactional的propagation屬性(可以做到A正常commit,但B做rollback)"></a>解法 1: 修改Transactional的propagation屬性(可以做到A正常commit,但B做rollback)</h4><p>Transactional的Default屬性<br>1.readOnly &#x3D; false<br>2.propagation &#x3D; Propagation.REQUIRED<br>3.isolation &#x3D; Isolation.DEFAULT<br>…</p><p>Bservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Bservice</span> &#123;<br><span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>System.out.println(<span class="hljs-string">&quot;insert in B and throw&quot;</span>);<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>重點在看你想用哪一種傳播情境</p><ol><li><p>除了不沿用default的REQUIRED<br>propagation &#x3D; Propagation.NOT_SUPPORTED</p></li><li><p>也可再開一條新的給B，A會正常commit，適合用在B沒有對DB操作<br>propagation &#x3D; Propagation.REQUIRES_NEW</p></li><li><p>或直接不用<br>propagation &#x3D; Propagation.NEVER </p></li><li><p>或A可以commit但B走rollback<br>propagation &#x3D; Propagation.NESTED</p></li></ol><p>目前實測都是不會報錯~</p><h4 id="關於傳播類型的個別差異可以參考此篇"><a href="#關於傳播類型的個別差異可以參考此篇" class="headerlink" title="關於傳播類型的個別差異可以參考此篇"></a>關於傳播類型的個別差異可以參考此篇</h4><p><a href="https://blog.csdn.net/yanxin1213/article/details/100582643">https://blog.csdn.net/yanxin1213/article/details/100582643</a></p><p>另附上各種情境<br><a href="https://www.tpisoftware.com/tpu/articleDetails/2741">https://www.tpisoftware.com/tpu/articleDetails/2741</a></p><p>此時console.log僅印出 不會噴Exception</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">insert in A<br>insert in B and throw<br>ERRRRRRRRRRRRRRRRRRRRRRRR<br>insert success in A<br></code></pre></td></tr></table></figure><h4 id="解法-2-自己手動處理這Exception-AB都rollback"><a href="#解法-2-自己手動處理這Exception-AB都rollback" class="headerlink" title="解法 2:自己手動處理這Exception(AB都rollback)"></a>解法 2:自己手動處理這Exception(AB都rollback)</h4><p>@Transactional是基於AOP實現的，</p><p>Spring AOP異常捕獲的原理是：<br>攔截的方法需要明確拋出異常，並且不能經過任何處理，這樣AOP代理才能捕獲方法的異常，<br>才能進行rollback，默認情況下AOP只捕獲RuntimeException異常。<br>或是你可以擴大範圍 @Transactional(rollbackFor &#x3D; Exception.class)</p><p>B方法返回時，transcation已經被設置為rollback-only<br>但是A這邊cstch住沒有繼續向外拋，那麼A方法結束時，就會由AOP來提交commit</p><p>所以這邊我們也要讓A從commit，變成rollback，就AB都會rollback了!</p><p>自己手動setRollbackOnly()</p><p>Aservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Aservice</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br>Bservice Bservice;<br><br><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span>  &#123;<br>System.out.println(<span class="hljs-string">&quot;insert in A&quot;</span>);<br><span class="hljs-keyword">try</span> &#123;<br>Bservice.insertData();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br><span class="hljs-comment">//直接把全部改為rollback 就沒衝突問題</span><br>TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();<br>System.out.println(<span class="hljs-string">&quot;ERRRRRRRRRRRRRRRRRRRRRRRR&quot;</span>);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;insert success in A&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>參考此篇:<br><a href="https://blog.csdn.net/sunayn/article/details/107942963">https://blog.csdn.net/sunayn/article/details/107942963</a></p><h4 id="解法-3-改用Component來取代service，因為我們在service的資料夾掛上交易的AOP，使得所有service都會有交易行為，只要拉出來放在別的資料夾，就沒有問題了。"><a href="#解法-3-改用Component來取代service，因為我們在service的資料夾掛上交易的AOP，使得所有service都會有交易行為，只要拉出來放在別的資料夾，就沒有問題了。" class="headerlink" title="解法 3:改用Component來取代service，因為我們在service的資料夾掛上交易的AOP，使得所有service都會有交易行為，只要拉出來放在別的資料夾，就沒有問題了。"></a>解法 3:改用Component來取代service，因為我們在service的資料夾掛上交易的AOP，使得所有service都會有交易行為，只要拉出來放在別的資料夾，就沒有問題了。</h4><p><em>這裡就不提供程式範例，但值得注意的是Component的使用時機</em><br><em>例如:共用元件又不須交易、特殊邏輯需要個別commit時。</em></p><p>假設有Aservice(有掛交易)跟一個Bcomponent(沒掛交易)<br>這樣A去呼叫B時 有可能會發生這種事，我畫個圖來表示</p><p><img src="https://i.imgur.com/UlyPn30.png"></p><h2 id="同場加映-1-Aservice-call-自己的method"><a href="#同場加映-1-Aservice-call-自己的method" class="headerlink" title="同場加映 1: Aservice call 自己的method"></a>同場加映 1: Aservice call 自己的method</h2><p>舉一個例子:<br>Cservice中有兩方法，insertData()有交易，讓沒有交易的queryData()，去呼叫有交易的方法<br>Aservice去呼叫Cservice中，沒有交易的方法queryData()</p><p>Cservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cservice</span> &#123;<br><br><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>();<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryData</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception  &#123;<br>insertData();<span class="hljs-comment">//call 自己內部有交易的方法，失效</span><br>System.out.println(<span class="hljs-string">&quot;insert C &amp;query in C&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Aservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Aservice</span> &#123;<br>    <br><span class="hljs-meta">@Autowired</span><br>Cservice Cservice;<br>    <br><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span>  &#123;<br>System.out.println(<span class="hljs-string">&quot;insert in A&quot;</span>);<br><span class="hljs-keyword">try</span> &#123;<br>Cservice.queryData();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>System.out.println(<span class="hljs-string">&quot;ERRRRRRRRRRRRRRRRRRRRRRRR&quot;</span>);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;insert success in A&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>testController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">testController</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br>Aservice aservice;<br><br><span class="hljs-meta">@GetMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>aservice.insertData();<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>這樣會印出 執行成功 並不會有衝突發生 代表@Transactional是失效的</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">insert in A<br>ERRRRRRRRRRRRRRRRRRRRRRRR<br>insert success in A<br></code></pre></td></tr></table></figure><p>其實是由於使用Spring AOP代理造成的，<br>因為只有當交易方法被當前class以外的程式呼叫時，才會由Spring生成的代理物件來管理。</p><p>參考補充:@Transactional失效情境<br><a href="https://juejin.cn/post/6844904096747503629">https://juejin.cn/post/6844904096747503629</a></p><h2 id="同場加映2-new一個class-呼叫其交易的方法"><a href="#同場加映2-new一個class-呼叫其交易的方法" class="headerlink" title="同場加映2: new一個class,呼叫其交易的方法"></a>同場加映2: new一個class,呼叫其交易的方法</h2><p>舉一個例子:<br>Aservice中去new 一個Cservice，呼叫其交易的方法insertData()</p><p>Cservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cservice</span> &#123;<br><br><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Aservice.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Aservice</span> &#123;<br>    <br><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertData</span><span class="hljs-params">()</span>  &#123;<br>System.out.println(<span class="hljs-string">&quot;insert in A&quot;</span>);<br><span class="hljs-type">Cservice</span> <span class="hljs-variable">Cservice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cservice</span>();<br><span class="hljs-keyword">try</span> &#123;<br>Cservice.insertData();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>System.out.println(<span class="hljs-string">&quot;ERRRRRRRRRRRRRRRRRRRRRRRR&quot;</span>);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;insert success in A&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>testController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">testController</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br>Aservice aservice;<br><br><span class="hljs-meta">@GetMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>aservice.insertData();<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>這樣會印出 執行成功 並不會有衝突發生 代表@Transactional是失效的</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">insert in A<br>ERRRRRRRRRRRRRRRRRRRRRRRR<br>insert success in A<br></code></pre></td></tr></table></figure><p>說明如果去new了一個class，就不歸spring容器管理了，<br>再呼叫class中被spring注入的類的方法，就找不到了，說明該類沒有被spring管理起來。</p><p>參考:<br><a href="https://blog.csdn.net/keepCode/article/details/122057148">https://blog.csdn.net/keepCode/article/details/122057148</a><br><a href="https://blog.csdn.net/MOFEG/article/details/121380772">https://blog.csdn.net/MOFEG/article/details/121380772</a></p><hr><p>今天先分享到這邊~希望大家對AOP有更深的認識 XD</p><p>下集預告 (希望有空拉 XD):<br>1.@Transactional 到底何時做commit動作?<br>2.如果自己寫AOP 和 @Transaction 一起使用時，執行順序? 與@Before @Around @After…的用法</p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>用JAVA寫一個雙人羽球(站位,發球權,計分)的規則</title>
    <link href="/2023/01/17/%E7%94%A8JAVA%E5%AF%AB%E4%B8%80%E5%80%8B%E9%9B%99%E4%BA%BA%E7%BE%BD%E7%90%83(%E7%AB%99%E4%BD%8D,%E7%99%BC%E7%90%83%E6%AC%8A,%E8%A8%88%E5%88%86)%E7%9A%84%E8%A6%8F%E5%89%87/"/>
    <url>/2023/01/17/%E7%94%A8JAVA%E5%AF%AB%E4%B8%80%E5%80%8B%E9%9B%99%E4%BA%BA%E7%BE%BD%E7%90%83(%E7%AB%99%E4%BD%8D,%E7%99%BC%E7%90%83%E6%AC%8A,%E8%A8%88%E5%88%86)%E7%9A%84%E8%A6%8F%E5%89%87/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近參加公司的羽毛球社團，結果發現完全不懂雙人羽球的規則!!!<br>再球權換來換去，還有位置換來換去的過程中，我已經暈了~<br>還是清楚狀況 XD</p><p>於是，身為一個工程師，那就用工程師的方法來記住規則吧~~~<br>😜😜😜 <strong>解決方法 寫一個程式 實際了解規則XD</strong></p><hr><h2 id="1-先來定義-class-gt-BadmintonDoubles-java"><a href="#1-先來定義-class-gt-BadmintonDoubles-java" class="headerlink" title="1. 先來定義 class -&gt; BadmintonDoubles.java"></a>1. 先來定義 class -&gt; BadmintonDoubles.java</h2><h3 id="主要會分成"><a href="#主要會分成" class="headerlink" title="主要會分成"></a>主要會分成</h3><p>1.兩支隊伍 teamA 跟 teamB<br>2.兩支隊伍 各自的分數 scoreA 跟 scoreB<br>3.發球權 server<br>4.比賽是否結束 isOver<br>5.四名參賽者 playerA, playerB, playerC, playerD</p><p>與諸多方法，如:拿到分數、球員是不是要換位置等等</p><p>話不多說直接上程式~~~</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Badminton;<br><br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * 雙人羽球 defult 站位</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * ｜-------------</span><br><span class="hljs-comment"> * ｜     |      |</span><br><span class="hljs-comment"> * ｜  C  |  D   |（teamB)</span><br><span class="hljs-comment"> * ｜     |      |</span><br><span class="hljs-comment"> * ｜－－－－－－－</span><br><span class="hljs-comment"> * ｜     |      |</span><br><span class="hljs-comment"> * ｜  B  |  A   | (teamA, A發球)</span><br><span class="hljs-comment"> * ｜     |      |</span><br><span class="hljs-comment"> * ｜-------------</span><br><span class="hljs-comment"> * */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadmintonDoubles</span> &#123;<br><span class="hljs-keyword">private</span> String teamA;<br><span class="hljs-keyword">private</span> String teamB;<br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> scoreA;<br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> scoreB;<br><span class="hljs-keyword">private</span> String server;<br><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> isOver;<br><span class="hljs-keyword">private</span> Player playerA, playerB, playerC, playerD;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">BadmintonDoubles</span><span class="hljs-params">(String teamA, String teamB, Player playerA, Player playerB, Player playerC,</span><br><span class="hljs-params">Player playerD)</span> &#123;<br><span class="hljs-built_in">this</span>.teamA = teamA;<br><span class="hljs-built_in">this</span>.teamB = teamB;<br><span class="hljs-built_in">this</span>.scoreA = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">this</span>.scoreB = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">this</span>.server = StringUtils.join(playerA.getName(), <span class="hljs-string">&quot;(&quot;</span>, playerA.getPosition() + <span class="hljs-string">&quot;)&quot;</span>);<br><span class="hljs-built_in">this</span>.isOver = <span class="hljs-literal">false</span>;<br><span class="hljs-built_in">this</span>.playerA = playerA;<br><span class="hljs-built_in">this</span>.playerB = playerB;<br><span class="hljs-built_in">this</span>.playerC = playerC;<br><span class="hljs-built_in">this</span>.playerD = playerD;<br>&#125;<br><br><span class="hljs-comment">// 用來回傳發球人</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getServer</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> server;<br>&#125;<br><br><span class="hljs-comment">// 回傳指定球隊的分數</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">(String team)</span> &#123;<br><span class="hljs-keyword">if</span> (team.equals(teamA)) &#123;<br><span class="hljs-keyword">return</span> scoreA;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (team.equals(teamB)) &#123;<br><span class="hljs-keyword">return</span> scoreB;<br>&#125;<br><span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 分數為偶數(ex:0、2、4、6、8、10)，則由站在右發球區的球員發球</span><br><span class="hljs-comment">// 分數為奇數(ex:1、3、5、7、9)，則由站左邊發球區球員發球。</span><br><span class="hljs-comment">// 傳入得分的team</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPosition</span><span class="hljs-params">(String team)</span> &#123;<br><span class="hljs-comment">// 偶數分 起始0</span><br><span class="hljs-keyword">if</span> (getScore(team) % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;right side&quot;</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<span class="hljs-comment">// 奇數分</span><br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;left side&quot;</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// 傳入的隊伍增加一分，並檢查是否有隊伍已經贏了比賽</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scorePoint</span><span class="hljs-params">(String team)</span> &#123;<br><span class="hljs-keyword">if</span> (team.equals(teamA)) &#123;<br>scoreA++;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (team.equals(teamB)) &#123;<br>scoreB++;<br>&#125;<br>checkForWin();<br>&#125;<br><br><span class="hljs-comment">// 用來回傳比賽是否已經結束</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOver</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> isOver;<br>&#125;<br><br><span class="hljs-comment">// 每局21分</span><br><span class="hljs-comment">// 若雙方在將近終局時，同時拿到20-20的分數，則進入DEUCE規則（任一方需取得兩分領先，才算得勝。例如：22-20、23-21、24-22）</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkForWin</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">if</span> (scoreA &gt;= <span class="hljs-number">20</span> &amp;&amp; scoreB &gt;= <span class="hljs-number">20</span>) &#123;<br><span class="hljs-comment">// DEUCE</span><br><span class="hljs-keyword">if</span> (scoreA - scoreB &gt;= <span class="hljs-number">2</span>) &#123;<br>System.out.println(teamA + <span class="hljs-string">&quot; wins the match!&quot;</span>);<br>isOver = <span class="hljs-literal">true</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (scoreB - scoreA &gt;= <span class="hljs-number">2</span>) &#123;<br>System.out.println(teamB + <span class="hljs-string">&quot; wins the match!&quot;</span>);<br>isOver = <span class="hljs-literal">true</span>;<br>&#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (scoreA &gt;= <span class="hljs-number">21</span>) &#123;<br>System.out.println(teamA + <span class="hljs-string">&quot; wins the match!&quot;</span>);<br>isOver = <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (scoreB &gt;= <span class="hljs-number">21</span>) &#123;<br>System.out.println(teamB + <span class="hljs-string">&quot; wins the match!&quot;</span>);<br>isOver = <span class="hljs-literal">true</span>;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// 更換球員站位</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swapPositions</span><span class="hljs-params">(String team)</span> &#123;<br><span class="hljs-keyword">if</span> (team.equals(teamA)) &#123;<br><span class="hljs-type">String</span> <span class="hljs-variable">positionTemp</span> <span class="hljs-operator">=</span> playerA.getPosition();<br>playerA.setPosition(playerB.getPosition());<br>playerB.setPosition(positionTemp);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (team.equals(teamB)) &#123;<br><span class="hljs-type">String</span> <span class="hljs-variable">positionTemp</span> <span class="hljs-operator">=</span> playerC.getPosition();<br>playerC.setPosition(playerD.getPosition());<br>playerD.setPosition(positionTemp);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// 傳入：得分的隊 ＆ 此次發球人</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">winOnePoint</span><span class="hljs-params">(String team, String playerName)</span> &#123;<br><span class="hljs-comment">// 此隊得分</span><br>scorePoint(team);<br>System.out.println(getNowScore());<br><br><span class="hljs-comment">// A隊得分 , 看現在比數 由A得誰發球</span><br><span class="hljs-keyword">if</span> (team.equals(teamA)) &#123;<br><span class="hljs-comment">// 發球方得分 才換邊</span><br><span class="hljs-keyword">if</span> (team.equals(teamA) &amp;&amp; StringUtils.equalsAny(playerName, playerA.getName(), playerB.getName())) &#123;<br>swapPositions(team);<br>&#125;<br><span class="hljs-keyword">if</span> (getPosition(<span class="hljs-string">&quot;teamA&quot;</span>).equals(playerA.getPosition())) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;發球權:&quot;</span> + teamA + <span class="hljs-string">&quot;, 發球邊:&quot;</span> + getPosition(team) + <span class="hljs-string">&quot;, 發球者:&quot;</span> + playerA.getName();<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;發球權:&quot;</span> + teamA + <span class="hljs-string">&quot;, 發球邊:&quot;</span> + getPosition(team) + <span class="hljs-string">&quot;, 發球者:&quot;</span> + playerB.getName();<br>&#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">// Ｂ隊得分 看現在比數 由Ｂ得誰發球</span><br><span class="hljs-comment">// 發球方得分 才換邊</span><br><span class="hljs-keyword">if</span> (team.equals(teamB) &amp;&amp; StringUtils.equalsAny(playerName, playerC.getName(), playerD.getName())) &#123;<br>swapPositions(team);<br>&#125;<br><span class="hljs-keyword">if</span> (getPosition(<span class="hljs-string">&quot;teamB&quot;</span>).equals(playerC.getPosition())) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;發球權:&quot;</span> + teamB + <span class="hljs-string">&quot;, 發球邊:&quot;</span> + getPosition(team) + <span class="hljs-string">&quot;, 發球者:&quot;</span> + playerC.getName();<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;發球權:&quot;</span> + teamB + <span class="hljs-string">&quot;, 發球邊:&quot;</span> + getPosition(team) + <span class="hljs-string">&quot;, 發球者:&quot;</span> + playerD.getName();<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNowScore</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;目前比數: (A)&quot;</span> + getScore(<span class="hljs-string">&quot;teamA&quot;</span>) + <span class="hljs-string">&quot;:&quot;</span> + getScore(<span class="hljs-string">&quot;teamB&quot;</span>) + <span class="hljs-string">&quot;(B)&quot;</span>;<br><br>&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Player</span> &#123;<br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-keyword">private</span> String position;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">Player</span><span class="hljs-params">(String name, String position)</span> &#123;<br><span class="hljs-built_in">this</span>.name = name;<br><span class="hljs-built_in">this</span>.position = position;<br>&#125;<br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> name;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br><span class="hljs-built_in">this</span>.name = name;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPosition</span><span class="hljs-params">(String position)</span> &#123;<br><span class="hljs-built_in">this</span>.position = position;<br>&#125;<br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPosition</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> position;<br>&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="2-然後寫main方法測試"><a href="#2-然後寫main方法測試" class="headerlink" title="2. 然後寫main方法測試"></a>2. 然後寫main方法測試</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Badminton;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestGame</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-type">BadmintonDoubles</span> <span class="hljs-variable">game</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadmintonDoubles</span>(<span class="hljs-string">&quot;teamA&quot;</span>, <span class="hljs-string">&quot;teamB&quot;</span>, <br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Player</span>(<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;right side&quot;</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Player</span>(<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;left side&quot;</span>), <br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Player</span>(<span class="hljs-string">&quot;C&quot;</span>,<span class="hljs-string">&quot;right side&quot;</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Player</span>(<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-string">&quot;left side&quot;</span>));<br><br>System.out.println(game.getNowScore());<br><br><span class="hljs-comment">//開局</span><br>System.out.println(<span class="hljs-string">&quot;team A 開局發球員: &quot;</span> + game.getServer());<br>System.out.println(<span class="hljs-string">&quot;--------start--------&quot;</span>);<br><br><span class="hljs-comment">//開局發球員得分</span><br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br><br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br><br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br><br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br><br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br><br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br><br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br><br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br><br><span class="hljs-comment">//以下測試</span><br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br><br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamB&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>System.out.println(<span class="hljs-string">&quot;----------------&quot;</span>);<br>System.out.println(game.winOnePoint(<span class="hljs-string">&quot;teamA&quot;</span>,<span class="hljs-string">&quot;A&quot;</span>));<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="3-結果如下"><a href="#3-結果如下" class="headerlink" title="3. 結果如下"></a>3. 結果如下</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><code class="hljs text">目前比數: (A)0:0(B)<br>team A 開局發球員: A(right side)<br>--------start--------<br>目前比數: (A)1:0(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)1:1(B)<br>發球權:teamB, 發球邊:left side, 發球者:D<br>----------------<br>目前比數: (A)2:1(B)<br>發球權:teamA, 發球邊:right side, 發球者:B<br>----------------<br>目前比數: (A)2:2(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)2:3(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)3:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)4:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)5:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)6:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)7:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)8:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)9:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)10:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)11:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)12:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)13:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)14:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)15:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)16:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)17:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)18:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)19:3(B)<br>發球權:teamA, 發球邊:left side, 發球者:A<br>----------------<br>目前比數: (A)20:3(B)<br>發球權:teamA, 發球邊:right side, 發球者:A<br>----------------<br>目前比數: (A)20:4(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:5(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:6(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:7(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:8(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:9(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:10(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:11(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:12(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:13(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:14(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:15(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:16(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:17(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:18(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:19(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)20:20(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)20:21(B)<br>發球權:teamB, 發球邊:left side, 發球者:C<br>----------------<br>目前比數: (A)21:21(B)<br>發球權:teamA, 發球邊:left side, 發球者:B<br>----------------<br>目前比數: (A)22:21(B)<br>發球權:teamA, 發球邊:right side, 發球者:B<br>----------------<br>目前比數: (A)22:22(B)<br>發球權:teamB, 發球邊:right side, 發球者:C<br>----------------<br>目前比數: (A)23:22(B)<br>發球權:teamA, 發球邊:left side, 發球者:B<br>----------------<br>teamA wins the match!<br>目前比數: (A)24:22(B)<br>發球權:teamA, 發球邊:right side, 發球者:B<br></code></pre></td></tr></table></figure><hr><p>這樣就記住規則拉!!! 開心灑花 ~~~</p><p>規則參考：（雙打發球說明範例）<br>1.<a href="https://www.victorsport.com.tw/badmintonaz/5072">https://www.victorsport.com.tw/badmintonaz/5072</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大會報告 就是明天 !!! Kotlin Meetup 7 實體線上同步舉行~</title>
    <link href="/2022/08/17/%E5%A4%A7%E6%9C%83%E5%A0%B1%E5%91%8A%20%E5%B0%B1%E6%98%AF%E6%98%8E%E5%A4%A9%20!!!%20Kotlin%20Meetup%207%20%E5%AF%A6%E9%AB%94%E7%B7%9A%E4%B8%8A%E5%90%8C%E6%AD%A5%E8%88%89%E8%A1%8C/"/>
    <url>/2022/08/17/%E5%A4%A7%E6%9C%83%E5%A0%B1%E5%91%8A%20%E5%B0%B1%E6%98%AF%E6%98%8E%E5%A4%A9%20!!!%20Kotlin%20Meetup%207%20%E5%AF%A6%E9%AB%94%E7%B7%9A%E4%B8%8A%E5%90%8C%E6%AD%A5%E8%88%89%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p>我是Tayli，睽違快兩年，終於又有實體的活動拉!!!<br>這次又擔任美編的出圖~ 依然用心 連LOGO都換了 ~ 撒花(YA</p><p><img src="https://i.imgur.com/plF0C0C.jpg"></p><p>👉Youtube直播 8&#x2F;18 明天晚上8點開始<br><a href="https://www.youtube.com/watch?v=yi6hD8Xw8-A">https://www.youtube.com/watch?v=yi6hD8Xw8-A</a></p><h1 id="About-this-event"><a href="#About-this-event" class="headerlink" title="About this event"></a>About this event</h1><p>歡迎來到 GDG Taipei 和 Taiwan Kotlin User Group 一起舉辦的 Kotlin Meetup #7📢</p><p>疫情趨緩後，眾望所歸的 Kotlin Meetup 又來啦！而且是實體聚會加上線上直播！🎉</p><p>這一次 [ Kotlin Meetup #7 ] 重磅邀請知名講者✨范聖佑✨大大來進行分享！</p><p>我們邀請聖佑來和我們聊聊撰寫《Kotlin Collection 全方位解析攻略 : 精通原理及實戰，寫出流暢好維護的程式》這本書時，所遇到的各種軼事，以及如何克服重重困難，最終完成這本深入淺出的好書。</p><p>🎊和我們一起在 DCard 一起 Kotlin Meetup！🎊</p><p>［ Kotlin Meetup #7 ］</p><p>時間：08&#x2F;18 晚上 8:00 - 9:00</p><p>地點：DCard 106台北市大安區光復南路102號 14 樓</p><p>主辦單位 :</p><p>🧑‍💻GDG Taipei</p><p>🧑‍💻Taiwan Kotlin User Group</p><p>🧑‍💻Kotlin Taipei</p><p>🔖主題 : 幕後特輯！解密 Kotlin Collection 及技術書籍撰寫祕辛</p><p>🔖講者 : 范聖佑</p><p>講者介紹：JetBrains 技術傳教士，負責推廣 Kotlin 程式語言、IntelliJ IDEA 系列 IDE 及團隊合作解決方案，協助開發者善用工具輔助來提升生產力，同時維護程式碼品質。工作之餘也熱血經營技術社群，常在各社群及研討會裡出沒，歡迎拍打餵食。</p><p>👉報名連結:<a href="https://gdg.community.dev/events/details/google-gdg-taipei-presents-kotlin-meetup-7/">https://gdg.community.dev/events/details/google-gdg-taipei-presents-kotlin-meetup-7/</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kotlin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何使用 程式碼追踪功能 in Eclipse</title>
    <link href="/2022/08/05/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20%E7%A8%8B%E5%BC%8F%E7%A2%BC%E8%BF%BD%E8%B8%AA%E5%8A%9F%E8%83%BD%20in%20Eclipse/"/>
    <url>/2022/08/05/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20%E7%A8%8B%E5%BC%8F%E7%A2%BC%E8%BF%BD%E8%B8%AA%E5%8A%9F%E8%83%BD%20in%20Eclipse/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>以前IDE不太熟，找問題都直接用File Search，後來發現IDE提供很多好用功能，減少大家錯誤獵殺的時間XD</p><p>除了最常見的功能 壓著ctrl會出現的<br>Open Declaration<br>Open Implemention<br><img src="https://i.imgur.com/40rSmuz.png"></p><hr><p>另外再介紹兩個我自己蠻喜歡的功能<br><strong>在方法或是class上 按下右鍵</strong><br><img src="https://i.imgur.com/gi7af4U.png"></p><h3 id="1-Open-Type-Hierarchy"><a href="#1-Open-Type-Hierarchy" class="headerlink" title="1.Open Type Hierarchy"></a>1.Open Type Hierarchy</h3><p>在StudentService按下右鍵選擇Open Type Hierarchy<br>就會出現他這整個class的結構!如下<br><img src="https://i.imgur.com/XDRSdhr.png"></p><p>有時候一個Service十幾個方法，兩三千行，一時之間難以找到你想用的方法，就可以看結構。這邊會顯示一個Type Hierarchy視窗，點下去它會帶你到導航到你想查看的方法位置上。</p><h3 id="2-Open-Call-Hierarchy"><a href="#2-Open-Call-Hierarchy" class="headerlink" title="2.Open Call Hierarchy"></a>2.Open Call Hierarchy</h3><p>在readAll()的方法上，按下右鍵選擇Open Call Hierarchy。<br><img src="https://i.imgur.com/aJSlode.png"></p><p>它會顯示有多少地方call過這方法，有時候寫一些共用方法，可以快速知道倒底誰呼叫過，這裡可以看出StudentController有去呼叫這方法來使用。<br><img src="https://i.imgur.com/xZxM6Zs.png"></p><p>這邊顯示Call Hierarchy視窗，點下去它也會帶你到導航到，呼叫這方法的位置上。</p><hr><p><strong>同場加映 顯示麵包屑</strong></p><h3 id="show-in-Breadcrumb"><a href="#show-in-Breadcrumb" class="headerlink" title="show in Breadcrumb"></a>show in Breadcrumb</h3><p>我們可以在class上按下右鍵<br><img src="https://i.imgur.com/gjnFs23.png"><br>上面就會出現一條這個class的檔案位置路徑。<br><img src="https://i.imgur.com/467HTcj.png"></p><p>或是想看全貌可以從Project Explorer樹狀結構看。<br><img src="https://i.imgur.com/AOfvKqC.png"></p><hr><h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>歡迎大家分享IDE小功能，減少DEBUG時間，希望這文章有幫助到大家XD</p><p>參考資料:<a href="https://tw-hkt.blogspot.com/2012/08/eclipse-ide.html?m=1">https://tw-hkt.blogspot.com/2012/08/eclipse-ide.html?m=1</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Eclipse</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何撤銷 Git push提交 in Eclipse</title>
    <link href="/2022/07/01/%E5%A6%82%E4%BD%95%E6%92%A4%E9%8A%B7%20Git%20push%E6%8F%90%E4%BA%A4%20in%20Eclipse/"/>
    <url>/2022/07/01/%E5%A6%82%E4%BD%95%E6%92%A4%E9%8A%B7%20Git%20push%E6%8F%90%E4%BA%A4%20in%20Eclipse/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>這次遇到一個問題，同事不小心pull到別人的分支下來，改了code，又push &amp; commit到 遠端上去了!!!!<br>這樣該如何還原 遠端的紀錄呢 ???!!!</p><p>☝️ 這次的步驟是：<br>先還原你本地端要回到的版本 → 把自己本地端的code 強制壓到遠端去overwrite → 完成 ✅</p><h2 id="1-先reset-–head-到你要的過往版本"><a href="#1-先reset-–head-到你要的過往版本" class="headerlink" title="1.先reset –head 到你要的過往版本"></a>1.先reset –head 到你要的過往版本</h2><p><img src="https://i.imgur.com/COnOlsb.png"></p><h2 id="2-在-Eclipse-push-打勾-Force-overwrite-branch-in-remote-if-it-exists-and-has-diverged"><a href="#2-在-Eclipse-push-打勾-Force-overwrite-branch-in-remote-if-it-exists-and-has-diverged" class="headerlink" title="2.在 Eclipse push 打勾 Force overwrite branch in remote if it exists and has diverged"></a>2.在 Eclipse push 打勾 Force overwrite branch in remote if it exists and has diverged</h2><p><strong>注意: 請務必小心使用 真的overwrite就再也回不去了喔!!!!!!!</strong></p><p><img src="https://i.imgur.com/bbAXHaT.png"></p><p>這樣就可以強制overwrite掉 遠端的版本~</p><hr><p>參考資料:<br><a href="https://blog.csdn.net/lanxing_huangyao/article/details/86718393">https://blog.csdn.net/lanxing_huangyao/article/details/86718393</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Eclipse</tag>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Oracle如何刪除被鎖定(locked)的session</title>
    <link href="/2022/07/01/Oracle%E5%A6%82%E4%BD%95%E5%88%AA%E9%99%A4%E8%A2%AB%E9%8E%96%E5%AE%9A(locked)%E7%9A%84session/"/>
    <url>/2022/07/01/Oracle%E5%A6%82%E4%BD%95%E5%88%AA%E9%99%A4%E8%A2%AB%E9%8E%96%E5%AE%9A(locked)%E7%9A%84session/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天在run別人寫得PKG時，怎麼打都卡住，連要編譯都不行!!!<br>這情況可能是Transaction時，有人忘記rollback 或 commit，<br>導致我的PKG被lock住~~~</p><p>像是這樣，這畫面直接卡住~<br><img src="https://i.imgur.com/15jMemW.png"></p><p>😜😜😜 <strong>解決方法 找到誰lock住 請他離線~ 或是砍掉他XD</strong></p><hr><h2 id="1-查詢出要刪除的Lock-Session-ID"><a href="#1-查詢出要刪除的Lock-Session-ID" class="headerlink" title="1. 查詢出要刪除的Lock Session ID"></a>1. 查詢出要刪除的Lock Session ID</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> a.sid<span class="hljs-operator">||</span><span class="hljs-string">&#x27;,&#x27;</span><span class="hljs-operator">||</span>a.serial#,a.machine<br><span class="hljs-keyword">FROM</span> v$session a,DBA_DML_LOCKS b<br><span class="hljs-keyword">WHERE</span> a.sid  <span class="hljs-operator">=</span> b.session_id<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> a.sid<span class="hljs-operator">||</span><span class="hljs-string">&#x27;,&#x27;</span><span class="hljs-operator">||</span>a.serial#,a.machine;<br><br></code></pre></td></tr></table></figure><p>利用找到的相關 session 資訊</p><p><img src="https://i.imgur.com/BS34Bn8.jpg"></p><p>通知該 session 關係人離線<br>或直接 kill 這些 session (不要砍到自己的).<br>請他關閉連線~~~</p><hr><h2 id="2-當得知哪支程式無法-compile-的解決辦法"><a href="#2-當得知哪支程式無法-compile-的解決辦法" class="headerlink" title="2. 當得知哪支程式無法 compile 的解決辦法"></a>2. 當得知哪支程式無法 compile 的解決辦法</h2><p>利用下列語法查詢 lock 住該 object 的 session</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--Name = 你的Object Name</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> DBA_DDL_LOCKS <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;PKG_TRIAL&#x27;</span>;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/qkcOZ1Y.jpg"></p><p>這樣就知道129 跟 245 lock住了~<br>通知該 session 關係人離線</p><hr><h2 id="3-如何刪除Session-ID"><a href="#3-如何刪除Session-ID" class="headerlink" title="3. 如何刪除Session ID"></a>3. 如何刪除Session ID</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--方法一 用第一個SQL查到的SID刪除</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">system</span> kill session <span class="hljs-string">&#x27;129,57492&#x27;</span>;<br><br><span class="hljs-comment">--方法二 (一邊查一邊刪!)</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-string">&#x27;alter system kill session &#x27;&#x27;&#x27;</span><span class="hljs-operator">||</span>sid<span class="hljs-operator">||</span><span class="hljs-string">&#x27;,&#x27;</span><span class="hljs-operator">||</span>serial#<span class="hljs-operator">||</span><span class="hljs-string">&#x27;&#x27;&#x27;;&#x27;</span> <br><span class="hljs-keyword">FROM</span> V$SESSION <br><span class="hljs-keyword">WHERE</span> SID <span class="hljs-keyword">IN</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">distinct</span> session_id <span class="hljs-keyword">FROM</span> DBA_DDL_LOCKS <br><span class="hljs-keyword">WHERE</span> NAME<span class="hljs-operator">=</span><span class="hljs-string">&#x27;PKG_TRIAL&#x27;</span><br>) <br><span class="hljs-keyword">AND</span> <span class="hljs-keyword">user</span>#<span class="hljs-operator">&lt;&gt;</span><span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> USERNAME <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;SYS&#x27;</span><br></code></pre></td></tr></table></figure><hr><p>這樣就可以順利刪除!!! 開心灑花 ~~~</p><p>參考資料:<br>1.<a href="http://orzcook.logdown.com/posts/65221">http://orzcook.logdown.com/posts/65221</a><br>2.<a href="https://ittutorial.org/alter-system-kill-session-tips-in-oracle/">https://ittutorial.org/alter-system-kill-session-tips-in-oracle/</a><br>3.<a href="https://stackoverflow.com/questions/58731396/can-not-compile-a-stored-procedure-because-it-seems-to-be-locked">https://stackoverflow.com/questions/58731396/can-not-compile-a-stored-procedure-because-it-seems-to-be-locked</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Oracle</tag>
      
      <tag>SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何匯入.zip in Eclipse</title>
    <link href="/2022/06/17/%E5%A6%82%E4%BD%95%E5%8C%AF%E5%85%A5.zip%20in%20Eclipse/"/>
    <url>/2022/06/17/%E5%A6%82%E4%BD%95%E5%8C%AF%E5%85%A5.zip%20in%20Eclipse/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>有時候不是所有的Code都有Source可以Clone<br>像是進到一家新公司，舊的專案，可能只有剩下zip檔…<br>這時候要怎麼匯入整個專案呢?<br>這裡提供一個簡單的匯入方法!</p><h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p>我這裡用GitHub 先下載一個大神的zip做示範~~~</p><p><img src="https://i.imgur.com/yZ15XyP.png"></p><p><img src="https://i.imgur.com/F3iUIL8.png"></p><h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>到Eclipse 去import<br><img src="https://i.imgur.com/0VIiJC2.png"></p><h2 id="選最後一個"><a href="#選最後一個" class="headerlink" title="選最後一個!!!"></a>選最後一個!!!</h2><p><img src="https://i.imgur.com/kebepNB.png"></p><h2 id="選Archive-這很重要"><a href="#選Archive-這很重要" class="headerlink" title="選Archive 這很重要!!!!"></a>選Archive 這很重要!!!!</h2><p><img src="https://i.imgur.com/98YFx27.png"></p><p><img src="https://i.imgur.com/QaDGI9g.png"></p><p>選擇你要匯進來的專案~</p><p><img src="https://i.imgur.com/vrGnmQn.png"></p><h2 id="finish"><a href="#finish" class="headerlink" title="finish"></a>finish</h2><p><img src="https://i.imgur.com/ak6lYvK.png"></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Eclipse</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何使用 PIVOT「扭轉」查詢的結果?</title>
    <link href="/2022/06/08/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20PIVOT%E3%80%8C%E6%89%AD%E8%BD%89%E3%80%8D%E6%9F%A5%E8%A9%A2%E7%9A%84%E7%B5%90%E6%9E%9C/"/>
    <url>/2022/06/08/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20PIVOT%E3%80%8C%E6%89%AD%E8%BD%89%E3%80%8D%E6%9F%A5%E8%A9%A2%E7%9A%84%E7%B5%90%E6%9E%9C/</url>
    
    <content type="html"><![CDATA[<h2 id="PIVOT-翻轉Table的方法"><a href="#PIVOT-翻轉Table的方法" class="headerlink" title="PIVOT 翻轉Table的方法"></a>PIVOT 翻轉Table的方法</h2><p>在Oracle 和 SQLServer 都有現成的PIvot 樞紐分析函式可以用~</p><p>公式如下</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">PIVOT ( <span class="hljs-operator">&lt;</span>aggregation <span class="hljs-keyword">function</span><span class="hljs-operator">&gt;</span>(<span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> being aggregated<span class="hljs-operator">&gt;</span>)<br><br><span class="hljs-keyword">FOR</span> [<span class="hljs-operator">&lt;</span><span class="hljs-keyword">column</span> that <span class="hljs-keyword">contains</span> the <span class="hljs-keyword">values</span> that will become <span class="hljs-keyword">column</span> headers<span class="hljs-operator">&gt;</span>]<br><br><span class="hljs-keyword">IN</span> ( [<span class="hljs-keyword">first</span> pivoted <span class="hljs-keyword">column</span>], [<span class="hljs-keyword">second</span> pivoted <span class="hljs-keyword">column</span>], ... [<span class="hljs-keyword">last</span> pivoted <span class="hljs-keyword">column</span>]) ) <span class="hljs-keyword">AS</span> <span class="hljs-operator">&lt;</span>alias <span class="hljs-keyword">for</span> the pivot <span class="hljs-keyword">table</span><span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>optional <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> clause<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><p>PIVOT 內放 運算集合<br>For 一個你要翻轉的欄位<br>IN 你對應到select 的欄位<br>As 為這新的PIVOT Table命名</p><h2 id="TABLE"><a href="#TABLE" class="headerlink" title="TABLE"></a>TABLE</h2><p>假設我們DB有一張表 叫ONETABLE,<br><strong>KIND 種類有 101,102,103 三種</strong><br>table 內容如下</p><table><thead><tr><th>TYPE1</th><th>TYPE2</th><th>KIND</th><th>CREATEDATE</th><th>DELMK</th></tr></thead><tbody><tr><td>A</td><td>B</td><td>101</td><td>20220401</td><td></td></tr><tr><td>A</td><td></td><td>102</td><td>20220505</td><td>D</td></tr><tr><td>A</td><td></td><td>101</td><td>20220601</td><td></td></tr><tr><td>A</td><td></td><td>102</td><td>20220601</td><td></td></tr><tr><td>B</td><td></td><td>102</td><td>20220602</td><td></td></tr><tr><td>B</td><td>A</td><td>102</td><td>20220608</td><td></td></tr></tbody></table><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>📊需求是要得到一張過濾掉條件後的表格<br><strong>統計每種TYPE的每種KIND次數加總</strong><br>期望要長這樣</p><table><thead><tr><th></th><th>101</th><th>102</th><th>103</th></tr></thead><tbody><tr><td>A</td><td>1</td><td>2</td><td>0</td></tr><tr><td>B</td><td>0</td><td>2</td><td>0</td></tr></tbody></table><h2 id="原先-SQL"><a href="#原先-SQL" class="headerlink" title="原先 SQL"></a>原先 SQL</h2><p>那就開始吧~~~</p><p>JAVA 連接資料庫連接 這段跳過<br>只需知道我們傳入三個欄位進DB查詢<br>1.TYPE類型 (LIKE A,B,C)<br>2.日期的起月<br>3.日期的迄月</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 傳入值 type = A , 起月 = 202205 , 迄月 = 202206</span><br><span class="hljs-comment">-- 條件</span><br>     <span class="hljs-keyword">SELECT</span> DECODE(<span class="hljs-string">&#x27;A&#x27;</span>, Type1, Type1, Type2, Type2) <span class="hljs-keyword">AS</span> Yourtype, Kind , <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) COUNT<br>     <span class="hljs-keyword">FROM</span> Onetable<br>     <span class="hljs-keyword">WHERE</span> TO_NUMBER(SUBSTR(Createdate,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>)) <span class="hljs-keyword">BETWEEN</span> TO_NUMBER(<span class="hljs-string">&#x27;202205&#x27;</span>) <span class="hljs-keyword">AND</span> TO_NUMBER(<span class="hljs-string">&#x27;202206&#x27;</span>)<br>     <span class="hljs-keyword">AND</span> (Delmk <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;D&#x27;</span> <span class="hljs-keyword">OR</span> Delmk <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>)<br>     <span class="hljs-keyword">AND</span> (Type1 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;A&#x27;</span> <span class="hljs-keyword">OR</span> Type2 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;A&#x27;</span>)<br>     <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Type1, Type2, Kind<br></code></pre></td></tr></table></figure><p>查出來的 資料應該會長這樣</p><table><thead><tr><th>YOURTYPE</th><th>KIND</th><th>COUNT</th></tr></thead><tbody><tr><td>A</td><td>102</td><td>1</td></tr><tr><td>A</td><td>102</td><td>1</td></tr><tr><td>A</td><td>101</td><td>1</td></tr></tbody></table><p>註(根據大表來看):<br>第一筆資料:CREATEDATE 時段範圍不對 X<br>第二筆資料:DELMK 為D註記 (表示已刪除) 已排除X<br>第三筆資料:TYPE1符合A , 有一筆KIND 101<br>第四筆資料:TYPE1符合A , 有一筆KIND 102<br>第五筆資料:TYPE1不符合<br>第六筆資料:雖TYPE1不符,但是TYPE2 符合A , 有一筆KIND 102</p><h2 id="困擾"><a href="#困擾" class="headerlink" title="困擾"></a>困擾</h2><p>這樣查出來 會是一個 根據TYPE&#x3D;A 的多筆LIST<br>再由JAVA 跑FOR迴圈 一一塞入對應值 這也是我原先的做法~ (很笨 但不用多想XD)</p><p>假設找出來 A的LIST 有10筆 迴圈就要跑十次<br>然後 TYPE有5種 合計就是5*10&#x3D;50次</p><h2 id="期望"><a href="#期望" class="headerlink" title="期望"></a>期望</h2><p>我期望查出來 是一個 根據TYPE&#x3D;A 的單一筆統計好各KIND次數的資料<br>希望查出來的表是長這樣</p><table><thead><tr><th>KIND1</th><th>KIND2</th><th>KIND3</th></tr></thead><tbody><tr><td>1</td><td>2</td><td>0</td></tr></tbody></table><p>這樣JAVA 不用跑回圈 永遠只有單一筆 統計好各KIND次數的資料</p><p>假設找出來 TYPE有5種 JAVA不用迴圈 只需要 5次</p><h2 id="解決方法-使用-PIVOT-「扭轉」查詢的結果-把SQL查詢成果（直式），轉成（橫式）展示格式"><a href="#解決方法-使用-PIVOT-「扭轉」查詢的結果-把SQL查詢成果（直式），轉成（橫式）展示格式" class="headerlink" title="解決方法- 使用 PIVOT 「扭轉」查詢的結果  (把SQL查詢成果（直式），轉成（橫式）展示格式)"></a>解決方法- 使用 PIVOT 「扭轉」查詢的結果  (把SQL查詢成果（直式），轉成（橫式）展示格式)</h2><p>注意:<br>1.如果只用kind的101,102,103當成欄位名稱，JAVA無法對應，因為JAVA的欄位命名，不能以數字為開頭，需要另訂名字<br>2.pivot 不能用nvl，只能加在找完後的上方欄位</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span>  (<br>  <span class="hljs-comment">--防止 像是kind3,沒有資料會出現null,給NVL 預設 0</span><br>  <span class="hljs-keyword">SELECT</span> nvl(kind1,<span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> kind1, nvl(kind2,<span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> kind2, nvl(kind3,<span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> kind3 <span class="hljs-keyword">FROM</span> (<br>     <span class="hljs-comment">-- 原本的SQL 條件</span><br>     <span class="hljs-keyword">SELECT</span> DECODE(<span class="hljs-string">&#x27;A&#x27;</span>, Type1, Type1, Type2, Type2) <span class="hljs-keyword">AS</span> Yourtype, Kind , <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) COUNT<br>     <span class="hljs-keyword">FROM</span> Onetable<br>     <span class="hljs-keyword">WHERE</span> TO_NUMBER(SUBSTR(Createdate,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>)) <span class="hljs-keyword">BETWEEN</span> TO_NUMBER(<span class="hljs-string">&#x27;202205&#x27;</span>) <span class="hljs-keyword">AND</span> TO_NUMBER(<span class="hljs-string">&#x27;202206&#x27;</span>)<br>     <span class="hljs-keyword">AND</span> (Delmk <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;D&#x27;</span> <span class="hljs-keyword">OR</span> Delmk <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>)<br>     <span class="hljs-keyword">AND</span> (Type1 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;A&#x27;</span> <span class="hljs-keyword">OR</span> Type2 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;A&#x27;</span>)<br>     <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Type1, Type2, Kind<br>  ) <br>  <span class="hljs-comment">-- 用pivot 將查出來的資料 再次分析 統計 </span><br>  pivot (<br>    <span class="hljs-comment">--註 看下方:為何用 SUM(COUNT) ?</span><br>    <span class="hljs-comment">--pivot 規定不可以用 nvl(SUM(COUNT),0)</span><br>    <span class="hljs-built_in">SUM</span>(COUNT) <br>    <span class="hljs-comment">--用Kind 當成查出來的欄位 因JAVA命名 所以AS別得名字</span><br>    <span class="hljs-keyword">FOR</span> Kind <span class="hljs-keyword">IN</span> (<span class="hljs-number">101</span> <span class="hljs-keyword">AS</span> kind1, <span class="hljs-number">102</span> <span class="hljs-keyword">AS</span> kind2, <span class="hljs-number">103</span> <span class="hljs-keyword">AS</span> kind3) <br>  ) <br>)<br><br></code></pre></td></tr></table></figure><p>BINGO~~~<br>查出來 type&#x3D;A的就會是</p><table><thead><tr><th>KIND1</th><th>KIND2</th><th>KIND3</th></tr></thead><tbody><tr><td>1</td><td>2</td><td>0</td></tr></tbody></table><h2 id="回到需求"><a href="#回到需求" class="headerlink" title="回到需求"></a>回到需求</h2><p>上述SQL 可以得到 第一列的 A<br>再來JAVA 只要在CALL一次 可以得到 B的這列<br>因為需要分開統計 所以目前僅想到這作法 沒辦法一次全部 條件不同 不過也省下很多工了XD~</p><table><thead><tr><th></th><th>101</th><th>102</th><th>103</th></tr></thead><tbody><tr><td>A</td><td>1</td><td>2</td><td>0</td></tr><tr><td>B</td><td>0</td><td>2</td><td>0</td></tr></tbody></table><h2 id="註-為何用-sum-count-而不是用count-count"><a href="#註-為何用-sum-count-而不是用count-count" class="headerlink" title="註:為何用 sum(count),而不是用count(count) ?"></a>註:為何用 sum(count),而不是用count(count) ?</h2><p>上面說到原本SQL查出來長這樣</p><table><thead><tr><th>YOURTYPE</th><th>KIND</th><th>COUNT</th></tr></thead><tbody><tr><td>A</td><td>102</td><td>1</td></tr><tr><td>A</td><td>102</td><td>1</td></tr><tr><td>A</td><td>101</td><td>1</td></tr></tbody></table><p>首先我們用KIND 當成查出來的欄位<br>所以以KIND角度來看~</p><p><strong>使用sum(count) ?</strong><br>原因是把這個KIND的COUNT 加起來<br>也就是<br>101 -&gt; 1<br>102 -&gt; 1+1&#x3D;2</p><p><strong>那為何不用 count(count) ?</strong><br>以KIND角度來看 count 是指<br>針對 KIND&#x3D;101 這只有一筆資料 所以count &#x3D;1<br>KIND&#x3D;102 這也只有一筆資料 所以count &#x3D;1</p><h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>技術債還是要還XD<br>剛好維護案看到一年半前自已寫的CODE<br>那時候也沒有研究特別得寫法<br>SA開的SQL就直接給他下去 手寫得很酸<br>現在終於有重構~ 靠著GOOGLE大神學了新寫法!<br>希望對大家有幫助~~~</p><p>這段SQL 有寫在線上測試DB 歡迎實測~~~<br><a href="http://sqlfiddle.com/#!4/a2ce3f/10">http://sqlfiddle.com/#!4/a2ce3f/10</a></p><hr><p>參考stackoverflow這篇<br>Using pivot on multiple columns of an Oracle row :<br><a href="https://stackoverflow.com/questions/23939244/using-pivot-on-multiple-columns-of-an-oracle-row">https://stackoverflow.com/questions/23939244/using-pivot-on-multiple-columns-of-an-oracle-row</a></p><p>參考:<br><a href="https://dotblogs.com.tw/SteveLiu/2019/05/21/173803">https://dotblogs.com.tw/SteveLiu/2019/05/21/173803</a></p><p>補充:如果要用 MySQL 和 Postgresql 請參考此篇(我沒用過XD)<br><a href="https://dotblogs.com.tw/daniel/2018/05/09/172804">https://dotblogs.com.tw/daniel/2018/05/09/172804</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何把本地專案 推上GitHub in Eclipse</title>
    <link href="/2022/06/01/%E5%A6%82%E4%BD%95%E6%8A%8A%E6%9C%AC%E5%9C%B0%E5%B0%88%E6%A1%88%20%E6%8E%A8%E4%B8%8AGitHub%20in%20Eclipse/"/>
    <url>/2022/06/01/%E5%A6%82%E4%BD%95%E6%8A%8A%E6%9C%AC%E5%9C%B0%E5%B0%88%E6%A1%88%20%E6%8E%A8%E4%B8%8AGitHub%20in%20Eclipse/</url>
    
    <content type="html"><![CDATA[<p>以前在學校的時候，被同學問到這個問題，沒能解決，現在終於有解法了!!!<br>以往都是在遠端建立一個倉庫，直接建分支，在本地端去clone下來，繼續編寫。<br>現在教另一種解法，直接本地端，推送上去空的repository上，<br>而且這樣就可以少一層最外面的資料夾，跟你的專案架構會長一樣摟。</p><p>相信大家都有自己寫Lab 想做成作品集的經驗 😀<br>😘 也相信大家都有Git的概念 ~~~</p><p>☝️ 這次的步驟是：<br>在遠端的GitHub先建立一個倉庫(repository) → 把自己本地端的code 推上這個遠端倉庫  → 完成 ✅</p><p>👍key point: 如何把本地端跟遠端掛勾~</p><p>那開始吧~~~</p><hr><p>⭐以下分解步驟 1~17⭐ </p><p>1.在你的github 建新的repository<br><img src="https://i.imgur.com/Mo2itSD.png"></p><p>2.先記得的你本地專案的名稱 spring-quartz<br><img src="https://i.imgur.com/JqmdM0p.png"></p><p>3.創建 spring-quartz 名稱的 create<br><img src="https://i.imgur.com/mSPYN6E.png"></p><p>4.看到這就成功建立<br><img src="https://i.imgur.com/XSAkQj3.png"></p><p>5.回到本地的eclipse 對你得專案 點右鍵 → Team -&gt; Share project<br><img src="https://i.imgur.com/cUq71HL.png"></p><p>6.打勾 Create repository<br><img src="https://i.imgur.com/Ij6rbpZ.png"></p><p>7.這樣就幫你的本地端這個專案 加上git<br><img src="https://i.imgur.com/xalXs4Z.png"></p><p>8.到資料夾確認一下 有綠勾 代表git就會開始對這個檔案做版控文件<br><img src="https://i.imgur.com/nBG6fqg.png"></p><p>9.將你要推的CODE 加入 ＋<br><img src="https://i.imgur.com/L8VCPPD.png"></p><p>10.給commit msg 就可以推拉<br><img src="https://i.imgur.com/CGyX6vD.png"></p><p>11.到你遠端的倉庫 複製這網址<br><img src="https://i.imgur.com/97OdDv9.png"></p><p>12.告訴本地端 要推到這個倉庫 輸入你的github帳密 就完成~~<br><img src="https://i.imgur.com/yK0Eq6B.png"></p><p>13.如果遇到這樣情況 不用緊張 eclipse常常怪怪的XD<br><img src="https://i.imgur.com/MyHZmJl.png"></p><p>14.到eclipse 的git repositories 重新推一次就好啦!<br><img src="https://i.imgur.com/v120HgF.png"></p><p>15.再來一次~ 一直點到最後<br><img src="https://i.imgur.com/hQwh2fi.png"></p><p>16.看到這推上去 就可以了 ~<br><img src="https://i.imgur.com/4PvsmRP.png"></p><p>17.到遠端來看看有沒有成功 這樣就成功摟!<br><img src="https://i.imgur.com/0NOiJ2c.png"></p><hr><p>之後有時間 就講這個專案 spring-quartz ~<br>了解一下Spring boot 專案的運行 步驟</p><p>歡迎搶先看這個迷你測試專案摟~<br><a href="https://github.com/TayliKuan/spring-quartz">https://github.com/TayliKuan/spring-quartz</a></p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Eclipse</tag>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大會報告 就是明天 !!! Kotlin Meetup 6 線上舉行~</title>
    <link href="/2022/05/30/%E5%A4%A7%E6%9C%83%E5%A0%B1%E5%91%8A%20%E5%B0%B1%E6%98%AF%E6%98%8E%E5%A4%A9%20!!!%20Kotlin%20Meetup%206%20%E7%B7%9A%E4%B8%8A%E8%88%89%E8%A1%8C/"/>
    <url>/2022/05/30/%E5%A4%A7%E6%9C%83%E5%A0%B1%E5%91%8A%20%E5%B0%B1%E6%98%AF%E6%98%8E%E5%A4%A9%20!!!%20Kotlin%20Meetup%206%20%E7%B7%9A%E4%B8%8A%E8%88%89%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p>我是Tayli 很榮幸這次被邀請擔任 Kotlin 的志工~ 這是我第一次擔任美編的出圖~ YA撒花</p><p><img src="https://i.imgur.com/JBn6cxB.jpg"></p><p>👉Youtube直播 5&#x2F;31 明天晚上8點開始<br><a href="https://www.youtube.com/watch?v=Uma0euAuQQs">https://www.youtube.com/watch?v=Uma0euAuQQs</a></p><h1 id="About-this-event"><a href="#About-this-event" class="headerlink" title="About this event"></a>About this event</h1><p>歡迎來到 GDG Taipei  和 Taiwan Kotlin User Group  一起舉辦的 Kotlin Meetup #6</p><p>疫情又來！但想參加meetup的心是不會被澆熄的！</p><p>這一次 [ Kotlin Meetup #6 ] 重磅邀請兩位講者</p><p>👉🏻如果你沒有接觸過單元測試，但一直很想學習</p><p>我們邀請了講者宜雯✨和大家分享「基礎單元測試入門」</p><p>👉🏻如果你經驗豐富想朝向更進階的TDD學習</p><p>我們邀請了講者彥彬✨和大家分享「Advanced TDD from Clean Craftsmanship」</p><p>歡迎大家在這個WFH好孤單的疫情期間</p><p>\和我們一起在Kotlin Meetup 線 上 見&#x2F;&#x2F;</p><p>［ Kotlin Meetup #6 ］</p><p>時間：05&#x2F;31 晚上 8:00 - 9:30</p><p>主辦單位 : </p><p>GDG Taipei </p><p>Taiwan Kotlin User Group </p><p>Kotlin Taipei</p><p>🔖主題 : 基礎單元測試入門，單元測試的基本概念 與 基本步驟</p><p>🔖講者 : 宜雯</p><p>講者宜雯介紹：小小 Junior Android App 開發工程師，努力學習讓程式碼寫的更簡潔更有效率，目前使用 Kotlin 開發 Android app , 參與 Android 開發相關社群，喜歡分享知識，平常會撰寫部落格將所學記錄下來。</p><p>🔖 主題 : Advanced TDD from Clean Craftsmanship</p><p>🔖 講者 : 彥彬</p><p>講者彥彬介紹：從 Google 宣布 Kotlin 為 Android 的官方語言開始就使用 Kotlin 到現在，另外也在經營 Android 社群如 「Android 讀書會」 以及 「Android Taipei」，喜歡研究架構以及 functional programming 。</p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kotlin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何安裝 JD-Eclipse 反編譯工具 in Eclipse</title>
    <link href="/2022/05/30/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%9D%20JD-Eclipse%20%E5%8F%8D%E7%B7%A8%E8%AD%AF%E5%B7%A5%E5%85%B7%20in%20Eclipse/"/>
    <url>/2022/05/30/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%9D%20JD-Eclipse%20%E5%8F%8D%E7%B7%A8%E8%AD%AF%E5%B7%A5%E5%85%B7%20in%20Eclipse/</url>
    
    <content type="html"><![CDATA[<p>1.下載jd-eclipse-2.0.0.zip文件</p><p><a href="http://java-decompiler.github.io/">http://java-decompiler.github.io/</a><br>先下載ZIP<br><img src="https://i.imgur.com/XDnI1di.png"></p><p>2.安裝<br>在eclipse中選擇Help–&gt;Install New Software…，點擊add按鈕</p><p>Name : JD-Eclipse Update Site (可隨便取名)<br>Location : 選擇下載的jd-eclipse-2.0.0.zip 位置</p><p><img src="https://i.imgur.com/xyt8fJ0.png"></p><p>3.一直下一步，到結束後重啟 Eclipse<br>一路Next，由於未簽名，因此出現警告對話框。單擊“仍然安裝”按鈕。</p><p>4.詳細配置JD-Eclipse反編譯插件<br>配置class跟class without source 把JS反編譯工具變成default</p><p><img src="https://i.imgur.com/DyeAbSj.png"><br><img src="https://i.imgur.com/wpFgV6z.png"></p><p>沒有看到去ADD找JD 點default</p><p><img src="https://i.imgur.com/z4e2zRl.png"><br><img src="https://i.imgur.com/fkaWp8t.png"></p><p>完成 可以開LIB的JAR裡面的CLASS來看看 有咖啡杯就是用JD反編譯工具開的</p><p><img src="https://i.imgur.com/BPAarkc.png"></p><hr><p>安裝步驟參考<br><a href="https://www.twblogs.net/a/5ebb4ff486ec4d2e7e7f87f1">https://www.twblogs.net/a/5ebb4ff486ec4d2e7e7f87f1</a></p><p>我的 <a href="https://github.com/TayliKuan">GitHub</a> 歡迎光臨!</p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Eclipse</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tayli&#39;s Club 正式開張 !</title>
    <link href="/2022/05/26/Tayli&#39;s%20Club%20%E6%AD%A3%E5%BC%8F%E9%96%8B%E5%BC%B5%20!/"/>
    <url>/2022/05/26/Tayli&#39;s%20Club%20%E6%AD%A3%E5%BC%8F%E9%96%8B%E5%BC%B5%20!/</url>
    
    <content type="html"><![CDATA[<p>HI 我是Tayli 簡單分享一下 建立這BLOG的過程 ~<br>在思考要怎樣有一個自己風格的部落格 看到github上很多人使用 Hexo<br>而且用.md 來編輯文章 跟我平常做筆記的 HackMD 完全相容!<br>決定立刻來試試 ~~~ 開始吧</p><hr><h2 id="首先我參考這篇文章"><a href="#首先我參考這篇文章" class="headerlink" title="首先我參考這篇文章"></a>首先我參考這篇文章</h2><p><a href="https://ithelp.ithome.com.tw/articles/10241592">https://ithelp.ithome.com.tw/articles/10241592</a></p><p>需要有GitHub帳號<br>電腦有安裝 git 跟 node.js<br>就可以開始拉~~~</p><h2 id="然後這文章又參考另外兩篇文章"><a href="#然後這文章又參考另外兩篇文章" class="headerlink" title="然後這文章又參考另外兩篇文章"></a>然後這文章又參考另外兩篇文章</h2><p>參考1 詳細<br><a href="https://blackmaple.me/hexo-tutorial/">https://blackmaple.me/hexo-tutorial/</a></p><p>參考2 詳細<br><a href="https://magicdogguo.github.io/2019/01/19/%E6%9E%B6%E8%A8%ADHexo%E7%B6%B2%E7%AB%99%E8%8D%89%E7%A8%BF/">https://magicdogguo.github.io/2019/01/19/%E6%9E%B6%E8%A8%ADHexo%E7%B6%B2%E7%AB%99%E8%8D%89%E7%A8%BF/</a></p><hr><h2 id="有遇上一個部屬問題"><a href="#有遇上一個部屬問題" class="headerlink" title="有遇上一個部屬問題"></a>有遇上一個部屬問題</h2><p><img src="https://i.imgur.com/NVND1JJ.png"></p><p>這樣原因是因為 沒有在 blog.TayliKuan 資料夾下面安裝git</p><p>所以進去資料夾內<br>C:\Users\2008019\blog.TayliKuan&gt;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>安裝就可以了</p><hr><h2 id="文章編輯完成-還沒有要部屬-可以先起server看-在4000port"><a href="#文章編輯完成-還沒有要部屬-可以先起server看-在4000port" class="headerlink" title="文章編輯完成 還沒有要部屬 可以先起server看 在4000port"></a>文章編輯完成 還沒有要部屬 可以先起server看 在4000port</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>看 Hexo is running at <a href="http://localhost:4000/">http://localhost:4000/</a><br>記得要結束  Ctrl+C to stop.</p><hr><h2 id="如何部屬"><a href="#如何部屬" class="headerlink" title="如何部屬 ?"></a>如何部屬 ?</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo d -g<br></code></pre></td></tr></table></figure><p>等幾分鐘 就有拉~</p><p>感謝提供服務 <a href="https://hexo.io/">Hexo</a>!<br>我的 <a href="https://github.com/TayliKuan">GitHub</a> 歡迎光臨!</p>]]></content>
    
    
    <categories>
      
      <category>Tech</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
